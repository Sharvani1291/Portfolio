"use strict";(self.webpackChunkSanityCMS_portfolio=self.webpackChunkSanityCMS_portfolio||[]).push([[796],{796(t,e,n){n.d(e,{stegaEncodeSourceMap$1:()=>C});var r=n(379),o=n(490);const c=/_key\s*==\s*['"](.*)['"]/;function i(t){if(!Array.isArray(t))throw new Error("Path is not an array");return t.reduce((t,e,n)=>{const r=typeof e;if("number"===r)return"".concat(t,"[").concat(e,"]");if("string"===r)return"".concat(t).concat(0===n?"":".").concat(e);if(function(t){return"string"==typeof t?c.test(t.trim()):"object"==typeof t&&"_key"in t}(e)&&e._key)return"".concat(t,'[_key=="').concat(e._key,'"]');if(Array.isArray(e)){const[n,r]=e;return"".concat(t,"[").concat(n,":").concat(r,"]")}throw new Error("Unsupported path segment `".concat(JSON.stringify(e),"`"))},"")}const a={"\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","'":"\\'","\\":"\\\\"},s={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t","\\'":"'","\\\\":"\\"};function l(t){const e=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let r;for(;null!==(r=n.exec(t));){if(void 0!==r[1]){const t=r[1].replace(/\\(\\|f|n|r|t|')/g,t=>s[t]);e.push(t);continue}if(void 0===r[2]){if(void 0!==r[3]){const t=r[3].replace(/\\(\\')/g,t=>s[t]);e.push({_key:t,_index:-1});continue}}else e.push(parseInt(r[2],10))}return e}function u(t){return t.map(t=>{if("string"==typeof t||"number"==typeof t)return t;if(""!==t._key)return{_key:t._key};if(-1!==t._index)return t._index;throw new Error("invalid segment:".concat(JSON.stringify(t)))})}function p(t){return t.map(t=>{if("string"==typeof t||"number"==typeof t)return t;if(-1!==t._index)return t._index;throw new Error("invalid segment:".concat(JSON.stringify(t)))})}function f(t,e){if(null===e||void 0===e||!e.mappings)return;const n=(r=p(t),"$".concat(r.map(t=>"string"==typeof t?"['".concat(t.replace(/[\f\n\r\t'\\]/g,t=>a[t]),"']"):"number"==typeof t?"[".concat(t,"]"):""!==t._key?"[?(@._key=='".concat(t._key.replace(/['\\]/g,t=>a[t]),"')]"):"[".concat(t._index,"]")).join("")));var r;if(void 0!==e.mappings[n])return{mapping:e.mappings[n],matchedPath:n,pathSuffix:""};const o=function(t){return t.map(t=>"string"==typeof t?"['".concat(t.replace(/[\f\n\r\t'\\]/g,t=>a[t]),"']"):"number"==typeof t?"[".concat(t,"]"):""!==t._key?"[?(@._key=='".concat(t._key.replace(/['\\]/g,t=>a[t]),"')]"):"[".concat(t._index,"]"))}(p(t));for(let c=o.length-1;c>=0;c--){const t="$".concat(o.slice(0,c).join("")),r=e.mappings[t];if(r){return{mapping:r,matchedPath:t,pathSuffix:n.substring(t.length)}}}}function d(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(function(t){return null!==t&&Array.isArray(t)}(t))return t.map((t,r)=>{if((0,o.u4)(t)){const o=t._key;if("string"==typeof o)return d(t,e,n.concat({_key:o,_index:r}))}return d(t,e,n.concat(r))});if((0,o.u4)(t)){if("block"===t._type||"span"===t._type){const o=(0,r.A)({},t);return"block"===t._type?o.children=d(t.children,e,n.concat("children")):"span"===t._type&&(o.text=d(t.text,e,n.concat("text"))),o}return Object.fromEntries(Object.entries(t).map(t=>{let[r,o]=t;return[r,d(o,e,n.concat(r))]}))}return e(t,n)}const h=".",g="".concat("drafts").concat(h),y="".concat("versions").concat(h);function m(t){return t.startsWith(g)}function v(t){return t.startsWith(y)}function _(t){const{baseUrl:e,workspace:n="default",tool:r="default",id:o,type:c,path:a,projectId:s,dataset:l}=t;if(!e)throw new Error("baseUrl is required");if(!a)throw new Error("path is required");if(!o)throw new Error("id is required");if("/"!==e&&e.endsWith("/"))throw new Error("baseUrl must not end with a slash");const p="default"===n?void 0:n,f="default"===r?void 0:r,d=function(t){return v(t)?t.split(h).slice(2).join(h):m(t)?t.slice(g.length):t}(o),y=Array.isArray(a)?i(u(a)):a,_=new URLSearchParams({baseUrl:e,id:d,type:c,path:y});if(p&&_.set("workspace",p),f&&_.set("tool",f),s&&_.set("projectId",s),l&&_.set("dataset",l),function(t){return!m(t)&&!v(t)}(o))_.set("perspective","published");else if(v(o)){const t=function(t){if(!v(t))return;const[e,n,...r]=t.split(h);return n}(o);_.set("perspective",t)}const k=["/"===e?"":e];p&&k.push(p);const w=["mode=presentation","id=".concat(d),"type=".concat(c),"path=".concat(encodeURIComponent(y))];return f&&w.push("tool=".concat(f)),k.push("intent","edit","".concat(w.join(";"),"?").concat(_)),k.join("/")}const k=t=>{let{sourcePath:e,resultPath:n,value:r}=t;if(/^\d{4}-\d{2}-\d{2}/.test(o=r)&&Date.parse(o)||function(t){try{const{protocol:e}=new URL(t,t.startsWith("/")?"https://acme.com":void 0);return b.has(e)||e.startsWith("web+")}catch(e){return!1}}(r))return!1;var o;const c=e.at(-1);return!("slug"===e.at(-2)&&"current"===c||"string"==typeof c&&(c.startsWith("_")||c.endsWith("Id"))||e.some(t=>"meta"===t||"metadata"===t||"openGraph"===t||"seo"===t)||S(e)||S(n)||"string"==typeof c&&w.has(c))},w=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","textTheme","unit","url","username","variant","website"]);const b=new Set(["app:","data:","discord:","file:","ftp:","ftps:","geo:","http:","https:","imap:","javascript:","magnet:","mailto:","maps:","ms-excel:","ms-powerpoint:","ms-word:","slack:","sms:","spotify:","steam:","teams:","tel:","vscode:","zoom:"]);function S(t){return t.some(t=>"string"==typeof t&&null!==t.match(/type/i))}const x=[8203,8204,8205,65279],U=x.map(t=>String.fromCharCode(t)),E=[8203,8204,8205,8290,8291,8288,65279,8289,119155,119156,119157,119158,119159,119160,119161,119162];Object.fromEntries(x.map((t,e)=>[t,e])),Object.fromEntries(E.map((t,e)=>[t,e.toString(16)]));const j=String.fromCodePoint(x[0]).repeat(4);function P(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";return!0!==n&&("auto"!==n||(r=t)&&"string"==typeof r&&Date.parse(r)||function(t){try{return new URL(t,t.startsWith("/")?"https://example.com":void 0),!0}catch(e){return!1}}(t))?t:"".concat(t).concat(function(t){if(void 0===t)return"";const e="string"==typeof t?t:JSON.stringify(t),n=(new TextEncoder).encode(e);let r="";for(let o=0;o<n.length;o++){const t=n[o];r+=U[t>>6&3]+U[t>>4&3]+U[t>>2&3]+U[3&t]}return j+r}(e));var r}[...x,...E].map(t=>"\\u{".concat(t.toString(16),"}")).join("");function A(t){return i(u(t))}var C=Object.freeze({__proto__:null,stegaEncodeSourceMap:function(t,e,n){var o;const{filter:i,logger:a,enabled:s}=n;if(!s){var u;const r="config.enabled must be true, don't call this function otherwise";throw null!==a&&void 0!==a&&null!==(u=a.error)&&void 0!==u&&u.call(a,"[@sanity/client]: ".concat(r),{result:t,resultSourceMap:e,config:n}),new TypeError(r)}if(!e)return null!==a&&void 0!==a&&null!==(o=a.error)&&void 0!==o&&o.call(a,"[@sanity/client]: Missing Content Source Map from response body",{result:t,resultSourceMap:e,config:n}),t;if(!n.studioUrl){var p;const r="config.studioUrl must be defined";throw null!==a&&void 0!==a&&null!==(p=a.error)&&void 0!==p&&p.call(a,"[@sanity/client]: ".concat(r),{result:t,resultSourceMap:e,config:n}),new TypeError(r)}const h={encoded:[],skipped:[]},g=function(t,e,n){return d(t,(t,r)=>{if("string"!=typeof t)return t;const o=f(r,e);if(!o)return t;const{mapping:c,matchedPath:i}=o;if("value"!==c.type||"documentValue"!==c.source.type)return t;const a=e.documents[c.source.document],s=e.paths[c.source.path],u=l(i),p=l(s).concat(r.slice(u.length));return n({sourcePath:p,sourceDocument:a,resultPath:r,value:t})})}(t,e,t=>{let{sourcePath:e,sourceDocument:o,resultPath:c,value:s}=t;if(!1===("function"==typeof i?i({sourcePath:e,resultPath:c,filterDefault:k,sourceDocument:o,value:s}):k({sourcePath:e,resultPath:c,value:s})))return a&&h.skipped.push({path:A(e),value:"".concat(s.slice(0,20)).concat(s.length>20?"...":""),length:s.length}),s;a&&h.encoded.push({path:A(e),value:"".concat(s.slice(0,20)).concat(s.length>20?"...":""),length:s.length});const{baseUrl:l,workspace:u,tool:p}=function(t){let e="string"==typeof t?t:t.baseUrl;return"/"!==e&&(e=e.replace(/\/$/,"")),"string"==typeof t?{baseUrl:e}:(0,r.A)((0,r.A)({},t),{},{baseUrl:e})}("function"==typeof n.studioUrl?n.studioUrl(o):n.studioUrl);if(!l)return s;const{_id:f,_type:d,_projectId:g,_dataset:y}=o;return P(s,{origin:"sanity.io",href:_((0,r.A)({baseUrl:l,workspace:u,tool:p,id:f,type:d,path:e},!n.omitCrossDatasetReferenceData&&{dataset:y,projectId:g}))},!0)});if(a){var y,m,v,w,b;const t=h.skipped.length,e=h.encoded.length;if((t||e)&&(null!==(y=(null===a||void 0===a?void 0:a.groupCollapsed)||a.log)&&void 0!==y&&y("[@sanity/client]: Encoding source map into result"),null!==(m=a.log)&&void 0!==m&&m.call(a,"[@sanity/client]: Paths encoded: ".concat(h.encoded.length,", skipped: ").concat(h.skipped.length))),h.encoded.length>0&&(null!==a&&void 0!==a&&null!==(v=a.log)&&void 0!==v&&v.call(a,"[@sanity/client]: Table of encoded paths"),null!==(w=(null===a||void 0===a?void 0:a.table)||a.log)&&void 0!==w&&w(h.encoded)),h.skipped.length>0){var S;const t=new Set;for(const{path:e}of h.skipped)t.add(e.replace(c,"0").replace(/\[\d+\]/g,"[]"));null===a||void 0===a||null===(S=a.log)||void 0===S||S.call(a,"[@sanity/client]: List of skipped paths",[...t.values()])}(t||e)&&(null===a||void 0===a||null===(b=a.groupEnd)||void 0===b||b.call(a))}return g}})}}]);
//# sourceMappingURL=796.0a6f6210.chunk.js.map